import{U as m}from"./UserProductModal-024c820d.js";import{_ as v,r as h,o as d,c as n,b as p,a as t,F as k,e as y,n as P,t as l,f as r,d as g}from"./index-cdbfea9c.js";const C={name:"Products",data(){return{products:[],loadingStatus:{loadingItem:""},isLoading:!1,product:{}}},components:{UserProductModal:m},mounted(){this.getProducts()},methods:{addToCart(e,a=1){this.isLoading=!0;const i="https://vue3-course-api.hexschool.io/v2/api/chris0000/cart";this.loadingStatus.loadingItem=e;const u={product_id:e,qty:a};this.$http.post(i,{data:u}).then(o=>{alert(o.data.message),this.loadingStatus.loadingItem="",this.$refs.userProductModal.hideModal(),this.isLoading=!1}).catch(o=>{alert(o.response.data.message)})},getProducts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/chris0000/products";this.$http.get(e).then(a=>{this.products=a.data.products,this.isLoading=!1}).catch(a=>{alert(a.response.data.message)})},getProduct(e){this.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/v2/api/chris0000/product/${e}`;this.loadingStatus.loadingItem=e,this.$http.get(a).then(i=>{this.loadingStatus.loadingItem="",this.product=i.data.product,this.isLoading=!1,this.$refs.userProductModal.openModal()}).catch(i=>{alert(i.response.data.message)})}}},L=t("h1",null,"This is 產品列表頁面",-1),S={class:"table align-middle"},I=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),x={style:{width:"200px"}},$={key:0,class:"h5"},M={key:1,class:"h6"},T={key:2,class:"h5"},U={class:"btn-group btn-group-sm"},N=["onClick","disabled"],V={key:0,class:"fas fa-spinner fa-pulse"},B=["onClick","disabled"],z={key:0,class:"fas fa-spinner fa-pulse"};function A(e,a,i,u,o,c){const _=h("Loading"),b=h("UserProductModal");return d(),n("div",null,[L,p(_,{active:o.isLoading},null,8,["active"]),t("table",S,[I,t("tbody",null,[(d(!0),n(k,null,y(o.products,s=>(d(),n("tr",{key:s.id},[t("td",x,[t("div",{style:P([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.imageUrl})`}])},null,4)]),t("td",null,l(s.title),1),t("td",null,[s.price?r("",!0):(d(),n("div",$,l(s.origin_price)+" 元",1)),s.price?(d(),n("del",M,"原價 "+l(s.origin_price)+" 元",1)):r("",!0),s.price?(d(),n("div",T,"現在只要 "+l(s.price)+" 元",1)):r("",!0)]),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:f=>c.getProduct(s.id),disabled:o.loadingStatus.loadingItem===s.id},[o.loadingStatus.loadingItem===s.id?(d(),n("i",V)):r("",!0),g(" 查看更多 ")],8,N),t("button",{type:"button",class:"btn btn-outline-danger",onClick:f=>c.addToCart(s.id),disabled:o.loadingStatus.loadingItem===s.id},[o.loadingStatus.loadingItem===s.id?(d(),n("i",z)):r("",!0),g(" 加到購物車 ")],8,B)])])]))),128))])]),p(b,{ref:"userProductModal",product:o.product,onAddToCart:c.addToCart},null,8,["product","onAddToCart"])])}const D=v(C,[["render",A]]);export{D as default};
